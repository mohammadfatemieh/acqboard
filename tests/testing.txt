13 January 2004

Okay, this is the assembly and testing log of our (*pray*) final acquisition board. 

First, some last-minute component shopping:
25LC320/SN-ND		EEPROM
SJ5523-0-ND		Little rubber feet
399-1091-ND		extra bypass caps
399-1096-ND		extra bypass caps
67-1253-ND		RT < dual LED, red
240-1001-1-ND		big analog supply ferrite
240-1008-1-ND		smt ferrite bead
RR08P10.0KBCT-ND	precision 10k resistors

Now, testing plans:

one board, just analog stuff -- no digital

other board, just digial, no analog.


Things to test:
first, digital power supplies

14 January 2004
Okay, there's already some code in the "vhdl" subdirectory. Today, I'm going to create LEDFLASH.vhd which will just flash the leds to let us know things have booted correctly. 

Baah! After all this work, the vias on the lower right side of the board didn't connect to the plane! I don't know why -- did I send them the wrong gerbers? Is this a power plane issue? WTF?

9 Februrary 2004
After working on the DSP board and getting it + it's accompanying FPGA code mostly done, we can return our focus to the Acqboard, the make-or-break component of the system. 

First, Analog power system, which appears to work. 


Just the output of the AD8221, nothing else. Just A1. 

So, first, just going to solder up an AD8221 and see what we get. 
Please note that board 1 Channel A1 is using a 1.0% 475-ohm gain resistor that measures 476 ohms. 

23 February 2004
We get what looks to be 150 uV P-P noise when shorting the inputs of the A1 AD221 together, at g=104, would translate into < 2 uV input noise. Strangely, it also looks like we've got a roughly 1.5 uV input Vos, which seems low. 

16 March 2004
Updated filter design
corrected values to make second-stage 2nd-order LPF bessel with correct 
values

verified in SPICE


15 April 2004
isolators + shift registers appear to produce correct outputs for at least a subset of the outputs (i.e. didn't test all)

17 April 2004
Discovered that the wrong packaging was used for the EEPROM -- TSSOP and SOIC packages have different pinouts, and was using the TSSOP pinout withthe SOIC package. Obviously, this won't work. Solved by removing IC, soldering CS\ and SO pins together, so all values read should be zero. This will prevent testing EEPROM reading, writing, on this version of the acqboard, and will require us having loaden == 0. Which sucks. But it will still let us measure a great deal of analog performance. 

23 May 2004
Getting ready for tomorrow's testing and assembly. 

24 May 2004
Well, look who didn't remember to update the overlays. This really sucks. So, pending the arrival of the jtag hardware today, we'll test to make sure we can boot, but that's about it. 

Things wrong on the acqboard:
Overlay text overlays some of the traces. 
The connector size for the jtag programmer is wrong. 

But, using 5k Ohm pullups for all pullups and 200 ohm current-limiting resistors, we have things working. We can connect to the chain, program the PROM, directly download via the jtag chain to the FPGA. I'd say this jtag setup was a success. 

30 May 2004
A short between VSS and GND on the analog side caused this board to be a loss, but luckily I was able to test the DL capabilities, and sure enough, the acqboard command interface appears to work correctly. However, the code is fragile for a number of reasons, including (but not limited to) 
